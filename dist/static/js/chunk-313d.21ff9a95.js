(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-313d"],{HL5O:function(t,e,r){"use strict";var i=r("tTfb");r.n(i).a},cAJY:function(t,e,r){"use strict";r.r(e);var i=r("oU4k"),a={name:"GoodsBrandsEdit",components:{PicsManagement:r("9G9v").a},data:function(){return{action:"add",rules:{brandWebSite:{validator:function(t,e,r){""===e||/^(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?$/.test(e)?r():r(new Error("网址格式不对!"))},trigger:"blur"}},visible:!1,brandEditMapApi:{add:i.a,edit:i.e},form:{id:"",brandName:"",brandWebSite:"",brandLOGO:"",brandLOGOFileName:"",brandDescrib:"",sort:0,visible:!0}}},mounted:function(){var t=this;this.logoData=this.$route.params,this.logoData.id&&this.initForm(),this.action=this.$route.query.action,this.$root.eventHub.$on("togglePicsCenterEvent",function(){t.visible=!t.visible}),this.$root.eventHub.$on("selectPicsCenterEvent",function(e){t.form.brandLOGO=e.url,t.form.brandLOGOFileName=e.fileName,t.visible=!1})},methods:{doEdit:function(){var t=this;console.log("edit"),this.brandEditMapApi.edit({id:this.form.id,name:this.form.brandName,site:this.form.brandWebSite,logo:this.form.brandLOGOFileName,description:this.form.brandDescrib,order:this.form.sort,active:this.form.visible}).then(function(e){200===e.status&&t.$message({type:"success",message:"编辑成功！"})})},doAdd:function(){var t=this;this.brandEditMapApi.add({name:this.form.brandName,site:this.form.brandWebSite,logo:this.form.brandLOGOFileName,description:this.form.brandDescrib,order:this.form.sort,active:this.form.visible}).then(function(e){200===e.status&&(t.$message({type:"success",message:"添加品牌成功！"}),t.$confirm("是否继续添加品牌?","",{confirmButtonText:"继续添加",cancelButtonText:"返回品牌列表",type:"warning"}).then(function(){t.form.brandLOGO="",t.form.brandLOGOFileName="",t.form.brandDescrib="",t.form.sort=0,t.form.visible=!0,t.$refs.editBrandsForm.resetFields()}).catch(function(){t.$router.push({path:"/goodsBrands"})}))})},initForm:function(){var t=this.logoData.brandLogo.split("/");this.form.id=this.logoData.id,this.form.brandName=this.logoData.brandName,this.form.brandLOGO=this.logoData.brandLogo,this.form.brandLOGOFileName=t[t.length-1],this.form.brandWebSite=this.logoData.brandWebsiteAddress,this.form.brandDescrib=this.logoData.brandDescrib,this.form.sort=this.logoData.sort,this.form.visible=this.logoData.visible},delPics:function(){this.form.brandLOGO="",this.form.brandLOGOFileName=""},togglePicsCenter:function(){this.$root.eventHub.$emit("togglePicsCenterEvent")},addBrand:function(){var t=this;this.$refs.editBrandsForm.validate(function(e){e&&("add"===t.action?t.doAdd():"edit"===t.action&&t.doEdit())})}}},o=(r("HL5O"),r("KHd+")),n=Object(o.a)(a,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-main",{staticClass:"brands-edit-wrap contentwrapper"},[r("div",[r("h3",{staticClass:"heading"},[t._v(t._s("add"===t.action?"添加":"编辑")+"品牌\n      "),r("span",{staticStyle:{float:"right","margin-top":"-3px"}},[r("router-link",{attrs:{to:"/goodsBrands"}},[r("el-button",{attrs:{type:"default",size:"mini"}},[r("font-awesome-icon",{attrs:{icon:["fas","reply"]}}),t._v("\n            返回商品品牌\n          ")],1)],1)],1)])]),t._v(" "),r("el-form",{ref:"editBrandsForm",staticClass:"commonForm",attrs:{model:t.form,"label-position":"right","label-width":"120px;"}},[r("el-container",[r("el-main",{staticStyle:{padding:"20px"}},[r("el-form-item",{attrs:{rules:[{required:!0,message:"品牌名称不能为空"}],label:"品牌名称",prop:"brandName"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入品牌名称"},model:{value:t.form.brandName,callback:function(e){t.$set(t.form,"brandName",e)},expression:"form.brandName"}})],1),t._v(" "),r("el-form-item",{attrs:{rules:t.rules.brandWebSite,label:"品牌网址",prop:"brandWebSite"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入品牌网址"},model:{value:t.form.brandWebSite,callback:function(e){t.$set(t.form,"brandWebSite",e)},expression:"form.brandWebSite"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"品牌LOGO"}},[""===t.form.brandLOGO?r("el-button",{attrs:{type:"default",size:"mini"},on:{click:t.togglePicsCenter}},[t._v("浏览图片上传")]):t._e(),t._v(" "),r("br"),t._v(" "),""!==t.form.brandLOGO?r("div",{staticClass:"thumbnail"},[r("img",{attrs:{src:t.form.brandLOGO}})]):t._e(),t._v(" "),""!==t.form.brandLOGO?r("span",[r("el-button",{attrs:{type:"default",size:"mini"},on:{click:t.togglePicsCenter}},[t._v("编辑")]),t._v(" "),r("el-button",{attrs:{type:"default",size:"mini"},on:{click:t.delPics}},[t._v("删除")])],1):t._e()],1),t._v(" "),r("el-form-item",{attrs:{label:"品牌描述"}},[r("el-input",{attrs:{autosize:{minRows:5,maxRows:10},placeholder:"请输入品牌描述",type:"textarea",clearable:""},model:{value:t.form.brandDescrib,callback:function(e){t.$set(t.form,"brandDescrib",e)},expression:"form.brandDescrib"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"排序"}},[r("el-input",{staticStyle:{width:"10em"},attrs:{clearable:""},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"是否显示"}},[r("el-radio-group",{model:{value:t.form.visible,callback:function(e){t.$set(t.form,"visible",e)},expression:"form.visible"}},[r("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),r("el-radio",{attrs:{label:!1}},[t._v("否")])],1),t._v(" "),r("br"),t._v(" "),r("small",[t._v("当品牌下还没有商品的时候，首页及分类页的品牌区将不会显示该品牌。")])],1),t._v(" "),r("el-form-item",{staticStyle:{"padding-left":"100px"}},[r("el-button",{staticStyle:{display:"inline-block"},attrs:{type:"primary"},on:{click:t.addBrand}},[t._v("确 定")])],1)],1)],1)],1),t._v(" "),r("pics-management",{attrs:{"dialog-visible":t.visible}})],1)},[],!1,null,null,null);n.options.__file="index.vue";e.default=n.exports},oU4k:function(t,e,r){"use strict";r.d(e,"j",function(){return a}),r.d(e,"l",function(){return o}),r.d(e,"k",function(){return n}),r.d(e,"b",function(){return s}),r.d(e,"h",function(){return d}),r.d(e,"m",function(){return l}),r.d(e,"o",function(){return c}),r.d(e,"i",function(){return u}),r.d(e,"d",function(){return m}),r.d(e,"n",function(){return b}),r.d(e,"f",function(){return f}),r.d(e,"a",function(){return p}),r.d(e,"g",function(){return h}),r.d(e,"c",function(){return v}),r.d(e,"e",function(){return g});var i=r("t3Un");function a(t){return Object(i.c)({url:"/v1/api/goods/list",method:"post",data:t})}function o(t){return Object(i.c)({url:"/v1/api/goods/topClass",method:"post",data:t})}function n(t){return Object(i.c)({url:"/v1/api/goods/secondClass",method:"post",data:t})}function s(t){return Object(i.c)({url:"/v1/api/goods/create",method:"post",data:t})}function d(t){return Object(i.c)({url:"/v1/api/goods/recycle/list",method:"post",data:t})}function l(t){return Object(i.c)({url:"/v1/api/goods/del",method:"post",data:{ids:t}})}function c(t){return Object(i.c)({url:"/v1/api/user/images/upload",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})}function u(t){return Object(i.c)({url:"/v1/api/user/images/myImages",method:"post",data:t})}function m(t){return Object(i.c)({url:"/v1/api/goods/recycle/clear",method:"post",data:{ids:t}})}function b(t){return Object(i.c)({url:"/v1/api/goods/recycle/recover",method:"post",data:{ids:t}})}function f(t){return Object(i.c)({url:"/v1/api/goods/edit",method:"post",data:t})}function p(t){return Object(i.c)({url:"/v1/api/brand/add",method:"post",data:t})}function h(t){return Object(i.c)({url:"/v1/api/brand/list",method:"post",data:t})}function v(t){return Object(i.c)({url:"/v1/api/brand/delete",method:"post",data:{ids:t}})}function g(t){return Object(i.c)({url:"/v1/api/brand/edit",method:"post",data:t})}},tTfb:function(t,e,r){}}]);