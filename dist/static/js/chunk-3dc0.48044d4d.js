(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3dc0"],{DaIU:function(e,t,a){"use strict";a.r(t);var o=a("jNkO"),l=a("oU4k"),r=a("9G9v"),s=a("LvDl"),i=a.n(s),n={name:"GoodsRepoAdd",components:{CateCasecader:o.a,PicsManagement:r.a},data:function(){return{visible:!1,prodRepoAddMapApi:{add:l.b},activeNames:[["1"],["1"],["1"],["1"]],form:{prodName:"",prodNo:"",price:0,marketPrice:0,weight:0,unit:"g",forSale:!1,selectedBrand:null,uploadFile:null,uploadFileThumb:null,uploadFileInstance:null,imageUrl:"",imageId:"",fileName:"",cateId:[]},rules:{cateId:{validator:function(e,t,a){i.a.isArray(t)&&0===t.length?a(new Error("分类不能为空")):a()}}},preSetData:{brandList:[{value:"0",label:"尤妮佳"},{value:"1",label:"香奈儿"},{value:"2",label:"SKII"},{value:"3",label:"华为"},{value:"4",label:"海尔"}]}}},mounted:function(){var e=this;this.$root.eventHub.$on("togglePicsCenterEvent",function(){e.visible=!e.visible}),this.$root.eventHub.$on("selectPicsCenterEvent",function(t){e.form.imageUrl=t.url,e.form.imageId=t.id,e.visible=!1})},methods:{cateCasecaderValueChangehandle:function(e){this.form.cateId=e,this.$refs.commonInfoForm.validateField("cateId",function(){})},togglePicsCenter:function(){this.$root.eventHub.$emit("togglePicsCenterEvent")},addProdToRepo:function(){var e=this;this.$refs.commonInfoForm.validate(function(t){t&&e.prodRepoAddMapApi.add({title:e.form.prodName,type:e.form.cateId,price:e.form.price,pointRate:0,detail:"",titleImage:[e.form.imageId]}).then(function(t){200===t.status&&(e.$message({type:"success",message:"添加商品成功！"}),e.$confirm("是否继续添加商品?","",{confirmButtonText:"继续添加",cancelButtonText:"返回商品列表",type:"warning"}).then(function(){e.form.cateId=[],e.$refs.commonInfoForm.resetFields()}).catch(function(){e.$router.push({path:"/goodsRepo/list"})}))})})}}},c=(a("mCSu"),a("KHd+")),m=Object(c.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"contentwrapper"},[a("el-main",[a("div",[a("h3",{staticClass:"heading"},[e._v("添加商品库商品\n        "),a("span",{staticStyle:{float:"right","margin-top":"-3px"}},[a("router-link",{attrs:{to:"/goodsRepo/list"}},[a("el-button",{attrs:{type:"default",size:"mini"}},[a("font-awesome-icon",{attrs:{icon:["fas","reply"]}}),e._v("\n              返回商品列表\n            ")],1)],1)],1)])]),e._v(" "),a("el-form",{ref:"commonInfoForm",staticClass:"commonForm",attrs:{model:e.form,"label-position":"left","label-width":"100px;"}},[a("el-container",[a("el-main",{staticStyle:{padding:"20px"}},[a("el-form-item",{attrs:{rules:[{required:!0,message:"商品名称不能为空！"}],label:"商品名称：",prop:"prodName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.prodName,callback:function(t){e.$set(e.form,"prodName",t)},expression:"form.prodName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品货号："}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.prodNo,callback:function(t){e.$set(e.form,"prodNo",t)},expression:"form.prodNo"}}),e._v(" "),a("small",[e._v("\n              如果您不输入商品货号，系统将自动生成一个唯一的货号。\n            ")])],1),e._v(" "),a("el-form-item",{attrs:{rules:[{required:!0,message:"市场售价不能为空！"}],prop:"price",label:"本店售价："}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e._v(" "),a("el-button",{staticClass:"inline-block right-beside-btn",attrs:{type:"default"}},[e._v("按市场价计算")])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"市场售价："}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.marketPrice,callback:function(t){e.$set(e.form,"marketPrice",t)},expression:"form.marketPrice"}}),e._v(" "),a("el-button",{staticClass:"inline-block right-beside-btn",attrs:{type:"default"}},[e._v("取整数")])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"商品重量："}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{staticClass:"input-with-select",attrs:{clearable:""},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}}),e._v(" "),a("el-select",{staticClass:"right-beside-btn",attrs:{slot:"append",placeholder:"请选择单位"},slot:"append",model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}},[a("el-option",{attrs:{label:"克",value:"g"}}),e._v(" "),a("el-option",{attrs:{label:"千克",value:"kg"}})],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"上架："}},[a("el-checkbox",{model:{value:e.form.forSale,callback:function(t){e.$set(e.form,"forSale",t)},expression:"form.forSale"}},[e._v("\n              打勾表示商家可见此商品，并允许商家将此商品导入店铺，否则不显示并不可导入\n            ")])],1),e._v(" "),a("el-collapse",{staticClass:"custom-collapse",model:{value:e.activeNames[0],callback:function(t){e.$set(e.activeNames,0,t)},expression:"activeNames[0]"}},[a("el-collapse-item",{attrs:{title:"SEO优化",name:"1"}},[a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{model:{value:e.form.seoKeywords,callback:function(t){e.$set(e.form,"seoKeywords",t)},expression:"form.seoKeywords"}}),e._v(" "),a("small",[e._v("用英文逗号分隔")])],1),e._v(" "),a("el-form-item",{attrs:{label:"简单描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.seoDescrib,callback:function(t){e.$set(e.form,"seoDescrib",t)},expression:"form.seoDescrib"}})],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.addProdToRepo}},[e._v("下一步")])],1)],1),e._v(" "),a("el-aside",{staticStyle:{width:"350px"}},[a("el-collapse",{staticClass:"custom-collapse",model:{value:e.activeNames[1],callback:function(t){e.$set(e.activeNames,1,t)},expression:"activeNames[1]"}},[a("el-collapse-item",{attrs:{title:"商品分类",name:"1"}},[a("el-form-item",{staticClass:"custom-form-item-label-top",attrs:{rules:e.rules.cateId,label:"选择商品分类",prop:"cateId",required:""}},[a("cate-casecader",{attrs:{"cate-id":e.form.cateId,clearable:""},on:{"value-change":e.cateCasecaderValueChangehandle}})],1)],1)],1),e._v(" "),a("el-collapse",{staticClass:"custom-collapse",model:{value:e.activeNames[2],callback:function(t){e.$set(e.activeNames,2,t)},expression:"activeNames[2]"}},[a("el-collapse-item",{attrs:{title:"商品品牌",name:"1"}},[a("el-form-item",{staticClass:"custom-form-item-label-top",attrs:{label:"选择商品品牌"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.selectedBrand,callback:function(t){e.$set(e.form,"selectedBrand",t)},expression:"form.selectedBrand"}},e._l(e.preSetData.brandList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-collapse",{staticClass:"custom-collapse",model:{value:e.activeNames[3],callback:function(t){e.$set(e.activeNames,3,t)},expression:"activeNames[3]"}},[a("el-collapse-item",{attrs:{title:"商品图片",name:"1"}},[a("el-form-item",{staticClass:"custom-form-item-label-top",attrs:{rules:[{required:!0,message:"必须上传商品首图！"}],prop:"imageUrl",label:"上传商品图片"}},[a("div",{staticClass:"upload-pic-wrap",on:{click:function(t){e.togglePicsCenter()}}},[e.form.imageUrl?e._e():a("span",{staticClass:"add-icon"},[a("font-awesome-icon",{staticStyle:{"font-size":"45px","margin-top":"17px"},attrs:{icon:["fas","plus"]}})],1),e._v(" "),e.form.imageUrl?a("img",{attrs:{src:e.form.imageUrl}}):e._e()])]),e._v(" "),e.form.imageUrl?a("el-form-item",{staticClass:"custom-form-item-label-top",attrs:{label:"商品缩略图"}},[a("div",{staticClass:"upload-pic-wrap",staticStyle:{width:"80px",height:"80px"},on:{click:function(t){e.togglePicsCenter()}}},[e.form.imageUrl?a("img",{attrs:{src:e.form.imageUrl}}):e._e()])]):e._e(),e._v(" "),a("small",[e._v("点击更换商品图片或商品缩略图")])],1)],1)],1)],1)],1)],1),e._v(" "),a("pics-management",{attrs:{"dialog-visible":e.visible}})],1)},[],!1,null,null,null);m.options.__file="goods-repo-add.vue";t.default=m.exports},mCSu:function(e,t,a){"use strict";var o=a("pdph");a.n(o).a},oU4k:function(e,t,a){"use strict";a.d(t,"j",function(){return l}),a.d(t,"l",function(){return r}),a.d(t,"k",function(){return s}),a.d(t,"b",function(){return i}),a.d(t,"h",function(){return n}),a.d(t,"m",function(){return c}),a.d(t,"o",function(){return m}),a.d(t,"i",function(){return u}),a.d(t,"d",function(){return d}),a.d(t,"n",function(){return p}),a.d(t,"f",function(){return f}),a.d(t,"a",function(){return v}),a.d(t,"g",function(){return b}),a.d(t,"c",function(){return g}),a.d(t,"e",function(){return h});var o=a("t3Un");function l(e){return Object(o.c)({url:"/v1/api/goods/list",method:"post",data:e})}function r(e){return Object(o.c)({url:"/v1/api/goods/topClass",method:"post",data:e})}function s(e){return Object(o.c)({url:"/v1/api/goods/secondClass",method:"post",data:e})}function i(e){return Object(o.c)({url:"/v1/api/goods/create",method:"post",data:e})}function n(e){return Object(o.c)({url:"/v1/api/goods/recycle/list",method:"post",data:e})}function c(e){return Object(o.c)({url:"/v1/api/goods/del",method:"post",data:{ids:e}})}function m(e){return Object(o.c)({url:"/v1/api/user/images/upload",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}function u(e){return Object(o.c)({url:"/v1/api/user/images/myImages",method:"post",data:e})}function d(e){return Object(o.c)({url:"/v1/api/goods/recycle/clear",method:"post",data:{ids:e}})}function p(e){return Object(o.c)({url:"/v1/api/goods/recycle/recover",method:"post",data:{ids:e}})}function f(e){return Object(o.c)({url:"/v1/api/goods/edit",method:"post",data:e})}function v(e){return Object(o.c)({url:"/v1/api/brand/add",method:"post",data:e})}function b(e){return Object(o.c)({url:"/v1/api/brand/list",method:"post",data:e})}function g(e){return Object(o.c)({url:"/v1/api/brand/delete",method:"post",data:{ids:e}})}function h(e){return Object(o.c)({url:"/v1/api/brand/edit",method:"post",data:e})}},pdph:function(e,t,a){}}]);